environments:
  production:
    name: rails-app
    image_name: k2nr/rails-docker-sample
    aws_actions:
      - s3:Put*
    scheduled_tasks:
      - schedule: rate(1 minute)
        command: ["sh", "-c", "echo hello $SECRET_KEY_BASE"]
      - schedule: rate(10 minutes)
        command: echo hello hello
    services:
      - name: web
        service_type: web
        cpu: 10
        memory: 256
        command: rails s -p $PORT -b 0.0.0.0
        listeners:
          - endpoint: test-endpoint
            health_check_interval: 10
            health_check_path: /
            rule_conditions:
              - type: path-pattern
                value: '*'
        auto_scaling:
          max_count: 3
          min_count: 1
